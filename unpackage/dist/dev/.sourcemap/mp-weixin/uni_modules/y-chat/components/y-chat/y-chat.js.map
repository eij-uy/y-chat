{"version":3,"sources":[null,"webpack:///D:/我的项目(练习)/my/chat-ceshi/uni_modules/y-chat/components/y-chat/y-chat.vue?4464","webpack:///D:/我的项目(练习)/my/chat-ceshi/uni_modules/y-chat/components/y-chat/y-chat.vue?f9e3","webpack:///D:/我的项目(练习)/my/chat-ceshi/uni_modules/y-chat/components/y-chat/y-chat.vue?711d","uni-app:///uni_modules/y-chat/components/y-chat/y-chat.vue","webpack:///D:/我的项目(练习)/my/chat-ceshi/uni_modules/y-chat/components/y-chat/y-chat.vue?b602","webpack:///D:/我的项目(练习)/my/chat-ceshi/uni_modules/y-chat/components/y-chat/y-chat.vue?0959"],"names":["props","watch","sheetList","handler","setTimeout","hideBox","showBox","immediate","deep","newMessageList","console","newVal","item","updateList","data","created","computed","bottomHeight","sheet","borderColor","methods","onRefresh","onReset","tapAvator","scrollBottom","showHideBox","closeFooter","lookImg","uni","current","urls","longPressActions","itemList","success","moreFun","playCamera","sourceType","fail","playPhoto","send","blur","showText","startAudio","moveAudio","endAudio"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACc;;;AAGnE;AACsL;AACtL,gBAAgB,iLAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,qUAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1DA;AAAA;AAAA;AAAA;AAAksB,CAAgB,ooBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACkKttB;AACA;AACA;AAAA;AAAA;AAAA,eACA;EACAA;EACAC;IACAC;MACAC;QAAA;QACAC;UACA;UACA;UACA;UACAC;YACA;UACA;UACAC;YACA;UACA;QACA;MACA;MACAC;MACAC;IACA;IACAC;MACAN;QAAA;QACA;QACAO;QACA;UACAC;YACAC;YACAA;UACA;UACA;UACAR;YACA;UACA;QACA;MACA;MACAI;IACA;IACAK;MACAV;QAAA;QACA;QACA;QACA;QACA;UACA;UACAQ;YACAC;YACAA;UACA;UACA;QACA;UACA;UACAF;UACAA;UACAC;UACAA;UACA;UACAP;YACA;UACA;QACA;MACA;MACAG;MACAC;IACA;EACA;EACAM;IACA,yBACAA;EAEA;EACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACA;IACAV;MACA;IACA;EACA;EACAW;IACA;IACAC;MAAA;MACA;MACA;QACA;QACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;MACA;MACApB;QACA;MACA;IACA;IACAqB;MAAA;MACA;MACA;QACArB;UACA;QACA;MACA;IACA;IACAsB;MACA;IACA;IACAC;MACA;QAAA;MAAA;QAAA;MAAA;MACA;QAAA;MAAA;MACAC;QACAC;QACAC;QAKAC;UACAC;UACAC;YACAvB;YACAA;UACA;QACA;MACA;IACA;IACAwB;MACAtB;IACA;IACAuB;MACAP;QACAQ;QACAH;UACA;UACA;QACA;QACAI;UACA3B;QACA;MACA;IACA;IACA4B;MAAA;MACAV;QACAQ;QACAH;UACA;UACA;QACA;QACAI;UACA3B;QACA;MACA;IACA;IACA6B;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACAlC;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACpXA;AAAA;AAAA;AAAA;AAAyzC,CAAgB,moCAAG,EAAC,C;;;;;;;;;;;ACA70C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"uni_modules/y-chat/components/y-chat/y-chat.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./y-chat.vue?vue&type=template&id=ad3f3678&\"\nvar renderjs\nimport script from \"./y-chat.vue?vue&type=script&lang=js&\"\nexport * from \"./y-chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./y-chat.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/y-chat/components/y-chat/y-chat.vue\"\nexport default component.exports","export * from \"-!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./y-chat.vue?vue&type=template&id=ad3f3678&\"","var components\ntry {\n  components = {\n    uImage: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-image/u-image\" */ \"@/uni_modules/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    uTag: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-tag/u-tag\" */ \"@/uni_modules/uview-ui/components/u-tag/u-tag.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uInput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-input/u-input\" */ \"@/uni_modules/uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uTransition: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-transition/u-transition\" */ \"@/uni_modules/uview-ui/components/u-transition/u-transition.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./y-chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./y-chat.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"y-wrap\" :style=\"'--bottom-height:' + bottomHeight\">\r\n\t\t<scroll-view\r\n\t\t\tclass=\"y-wrap_message_content\"\r\n\t\t\tscroll-y\r\n\t\t\t:scroll-into-view=\"scrollToId\"\r\n\t\t\t:refresher-enabled=\"useRefresh\"\r\n\t\t\t:refresher-threshold=\"100\"\r\n\t\t\t:refresher-triggered=\"triggered\"\r\n\t\t\tscroll-with-animation\r\n\t\t\trefresher-default-style=\"white\"\r\n\t\t\trefresher-background=\"#F2F2F2\"\r\n\t\t\t@refresherrefresh=\"onRefresh\"\r\n\t\t\t@refresherrestore=\"onReset\"\r\n\t\t\t@tap=\"closeFooter\"\r\n\t\t>\r\n\t\t\t<view\r\n\t\t\t\tv-for=\"(item, index) in list\"\r\n\t\t\t\t:key=\"index\"\r\n\t\t\t\t:id=\"'y-chat-' + item[defaultOptions['msgId']]\"\r\n\t\t\t\t:class=\"['y-wrap_message_content_box', { 'y-wrap_message_content_my' : item[defaultOptions['userId']] == userId }]\"\r\n\t\t\t>\r\n\t\t\t\t<view style=\"text-align: center; padding: 10rpx 0 20rpx;\" v-if=\"item.showTime\">\r\n\t\t\t\t\t{{ item.timeLabel }}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<u-image\r\n\t\t\t\t\t\twidth=\"100rpx\"\r\n\t\t\t\t\t\theight=\"100rpx\"\r\n\t\t\t\t\t\t:src=\"item[defaultOptions['avator']] || errorIcon\"\r\n\t\t\t\t\t\t@click=\"tapAvator(item)\"\r\n\t\t\t\t\t\tradius=\"10rpx\"\r\n\t\t\t\t\t\tbgColor=\"red\"\r\n\t\t\t\t\t></u-image>\r\n\t\t\t\t\t<view :class=\"['y-wrap_message_content_box_msg', { 'y-wrap_message_content_box_my' : item[defaultOptions['userId']] == userId }]\">\r\n\t\t\t\t\t\t<view :class=\"['y-wrap_message_content_box_msg__name', { 'y-wrap_message_content_box_msg__me' : item[defaultOptions['userId']] == userId }]\">\r\n\t\t\t\t\t\t\t<u-tag\r\n\t\t\t\t\t\t\t\tv-if=\"tagOptions[item[defaultOptions['tagLabel']]]\"\r\n\t\t\t\t\t\t\t\t:bgColor=\"tagOptions[item[defaultOptions['tagLabel']]] ? tagOptions[item[defaultOptions['tagLabel']]].bgColor : ''\"\r\n\t\t\t\t\t\t\t\t:borderColor=\"tagOptions[item[defaultOptions['tagLabel']]] ? tagOptions[item[defaultOptions['tagLabel']]].bgColor : ''\"\r\n\t\t\t\t\t\t\t\t:color=\"tagOptions[item[defaultOptions['tagLabel']]] ? tagOptions[item[defaultOptions['tagLabel']]].color : ''\"\r\n\t\t\t\t\t\t\t\t:text=\"tagOptions[item[defaultOptions['tagLabel']]] ? tagOptions[item[defaultOptions['tagLabel']]].text : ''\"\r\n\t\t\t\t\t\t\t\tsize=\"mini\"\r\n\t\t\t\t\t\t\t></u-tag>\r\n\r\n\t\t\t\t\t\t\t<!-- <text>{{ item[defaultOptions['name']] }}</text> -->\r\n\t\t\t\t\t\t\t<text>{{ item[defaultOptions['name']] }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t:class=\"['y-wrap_message_content_box_msg__val', { 'y-wrap_message_content_box_msg__my' : item[defaultOptions['userId']] == userId }]\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\t\tv-if=\"item[defaultOptions['message']]\"\r\n\t\t\t\t\t\t\t>{{ item[defaultOptions['message']] }}</view>\r\n\t\t\t\t\t\t\t<u-image\r\n\t\t\t\t\t\t\t\t@tap=\"lookImg(item[defaultOptions['img']], index)\"\r\n\t\t\t\t\t\t\t\tv-if=\"item[defaultOptions['img']]\"\r\n\t\t\t\t\t\t\t\t:src=\"item[defaultOptions['img']]\"\r\n\t\t\t\t\t\t\t\twidth=\"calc(60vw - 15rpx)\"\r\n\t\t\t\t\t\t\t\theight=\"auto\"\r\n\t\t\t\t\t\t\t\tmode=\"widthFix\"\r\n\t\t\t\t\t\t\t></u-image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- <view class=\"y_message_content_box_read\">\r\n\t\t\t\t\t\t{{item[defaultOptions['read']]?'已读':'未读'}}\r\n\t\t\t\t\t</view> -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t<view class=\"y-wrap_footer\">\r\n\t\t\t<view class=\"y-wrap_footer_show_box\" id=\"show_box\">\r\n\t\t\t\t<!-- @click=\"textShowFlag = false\" -->\t\r\n\t\t\t\t<u-icon custom-style=\"padding: 0 10rpx\" :size=\"iconSize\" name=\"mic\" v-if=\"textShowFlag\" ></u-icon>\r\n\t\t\t\t<u-icon custom-style=\"padding: 0 10rpx\" :size=\"iconSize\" name=\"mic\" v-else @click=\"showText\"></u-icon>\r\n\t\t\t\t<view class=\"y-wrap_footer_show_box__ipt\">\r\n\t\t\t\t\t<!-- <input v-if=\"textShowFlag\" v-model=\"sendVal\" :focus=\"focus\" @blur=\"blur\"></input> -->\r\n\t\t\t\t\t<u-input v-if=\"textShowFlag\" v-model=\"sendVal\" :focus=\"focus\" @blur=\"blur\"></u-input>\r\n\t\t\t\t\t<!-- <u-button v-else @touchstart=\"startAudio\" @touchend=\"endAudio\">按住说话</u-button> -->\r\n\t\t\t\t\t<button v-else style=\"font-size: 32rpx; overflow: inherit;\" @touchstart=\"startAudio\" @touchmove=\"moveAudio\" @touchend=\"endAudio\">按住说话</button>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<!-- <u-icon custom-style=\"padding: 0 10rpx\" :size=\"iconSize\" name=\"star\"></u-icon> -->\r\n\t\t\t\t\t<!-- #ifndef MP-WEIXIN -->\r\n\t\t\t\t\t\t<u-icon\r\n\t\t\t\t\t\t\tcustomStyle=\"padding: 0 10rpx;\"\r\n\t\t\t\t\t\t\t:size=\"iconSize\"\r\n\t\t\t\t\t\t\tname=\"plus\"\r\n\t\t\t\t\t\t\t@click=\"showHideBox\"\r\n\t\t\t\t\t\t\t:class=\"!sendVal ? 'width_to_mini' : 'fade_show'\"\r\n\t\t\t\t\t\t\tv-if=\"!sendVal\"\r\n\t\t\t\t\t\t></u-icon>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tstyle=\"width:116rpx; padding: 0; text-align: center; margin-left: 10rpx;\"\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\tsize=\"mini\"\r\n\t\t\t\t\t\t\t:class=\"sendVal ? 'width_to_large' : 'fade_show'\"\r\n\t\t\t\t\t\t\t@touchend.prevent=\"send\"\r\n\t\t\t\t\t\t\tref=\"send\"\r\n\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t>发送</button>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t\t\t\t<u-transition :show=\"!sendVal\">\r\n\t\t\t\t\t\t\t<u-icon\r\n\t\t\t\t\t\t\t\tcustomStyle=\"padding: 0 10rpx;\"\r\n\t\t\t\t\t\t\t\t:size=\"iconSize\"\r\n\t\t\t\t\t\t\t\tname=\"plus\"\r\n\t\t\t\t\t\t\t\t@click=\"showHideBox\"\r\n\t\t\t\t\t\t\t\tv-if=\"!sendVal\"\r\n\t\t\t\t\t\t\t></u-icon>\r\n\t\t\t\t\t\t</u-transition>\r\n\t\t\t\t\t\t<u-transition :show=\"sendVal\">\r\n\t\t\t\t\t\t  <button\r\n\t\t\t\t\t\t\tstyle=\"width:116rpx; 60rpx; padding: 0; text-align: center; margin-left: 10rpx;\"\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\tsize=\"mini\"\r\n\t\t\t\t\t\t\tv-if=\"sendVal\"\r\n\t\t\t\t\t\t\t@touchend.prevent=\"send\"\r\n\t\t\t\t\t\t  >发送</button>\r\n\t\t\t\t\t   </u-transition>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"y-wrap_footer_hide_box\" id=\"hide_box\">\r\n\t\t\t\t<view class=\"y-wrap_footer_hide_box_item\" v-for=\"(item, index) in sheet\" :key=\"index\" @click=\"moreFun(item)\">\r\n\t\t\t\t\t<view class=\"y-wrap_footer_hide_box_item__btn\">\r\n\t\t\t\t\t\t<u-image v-if=\"item.img\" :src=\"item.img\" width=\"60rpx\" height=\"60rpx\" mode=\"aspectFill\" />\r\n\t\t\t\t\t\t<u-icon v-else :size=\"iconSize\" :name=\"item.icon\"></u-icon>\r\n\t\t\t\t\t\t<text>{{ item.name }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- readyCloseAudio -->\r\n\t\t<u-popup \r\n\t\t\t:show=\"audioFlag\" \r\n\t\t\t:bgColor=\"readyCloseAudio ? 'rgba(255, 0, 0, 0.4)' : ''\" \r\n\t\t\tmode=\"center\" \r\n\t\t\t:zoom=\"false\" \r\n\t\t\tround=\"20\"\r\n\t\t>\r\n\t\t\t<view class=\"y-wrap_audio\">\r\n\t\t\t\t<view class=\"y-wrap_audio__large\" :style=\"'border-color:' + borderColor\">\r\n\t\t\t\t\t<view class=\"y-wrap_audio__small\" :style=\"'border-color:' + borderColor\">\r\n\t\t\t\t\t\t<view class=\"y-wrap_audio__mini\" :style=\"'border-color:' + borderColor\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- <view>\r\n\t\t\t\t<text>人生若只如初见，何事秋风悲画扇</text>\r\n\t\t\t</view> -->\r\n\t\t</u-popup>\r\n\t\t\r\n\t\t<view \r\n\t\t\tv-if=\"audioFlag\" \r\n\t\t\t:style=\"'position: fixed; bottom: 200rpx; left: 50%; transform: translateX(-50%); z-index: 10080; color: #fff;'\">\r\n\t\t\t上划取消发送\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport { disposeTime, repairZero, deepClone } from './common.js'\r\n\timport props from './props.js'\r\n\timport data from './data.js'\r\n\texport default {\r\n\t\tprops,\r\n\t\twatch: {\r\n\t\t\tsheetList: {\r\n\t\t\t\thandler:function(){\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\t\t\t\tlet showBox = query.select('#show_box')\r\n\t\t\t\t\t\tlet hideBox = query.select('#hide_box')\r\n\t\t\t\t\t\thideBox.boundingClientRect((res) => {\r\n\t\t\t\t\t\t\tthis.hideBoxHeight = res.height\r\n\t\t\t\t\t\t}).exec()\r\n\t\t\t\t\t\tshowBox.boundingClientRect((res) => {\r\n\t\t\t\t\t\t\tthis.showBoxHeight = res.height\r\n\t\t\t\t\t\t}).exec()\r\n\t\t\t\t\t})\r\n\t\t\t\t},\r\n\t\t\t\timmediate: true,\r\n\t\t\t\tdeep: true\r\n\t\t\t},\r\n\t\t\tnewMessageList: {\r\n\t\t\t\thandler(newVal, oldVal){\r\n\t\t\t\t\tconst timeOptions = this.defaultOptions.time\r\n\t\t\t\t\tconsole.log(newVal.length != oldVal?.length,'newVal.length != oldVal?.length')\r\n\t\t\t\t\tif(newVal.length > 0 && newVal.length != oldVal?.length){\r\n\t\t\t\t\t\tnewVal.forEach((item, index) => {\r\n\t\t\t\t\t\t\titem.showTime = index == 0 ? true : item.time - newVal[index - 1][timeOptions] >= this.intervalTime\r\n\t\t\t\t\t\t\titem.timeLabel = disposeTime(item.time)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.list = newVal\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.scrollBottom()\r\n\t\t\t\t\t\t},100)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdeep: true\r\n\t\t\t},\r\n\t\t\tupdateList: {\r\n\t\t\t\thandler:function(newVal, oldVal){\r\n\t\t\t\t\tif(newVal?.length == 0) return\r\n\t\t\t\t\tconst timeOptions = this.defaultOptions.time\r\n\t\t\t\t\tconst idOptions = this.defaultOptions.msgId\r\n\t\t\t\t\tif(Object.prototype.toString.call(newVal).includes('Array')){\r\n\t\t\t\t\t\t//历史消息\r\n\t\t\t\t\t\tnewVal.forEach((item, index) => {\r\n\t\t\t\t\t\t\titem.showTime = index == 0 ? true : item[timeOptions] - newVal[index - 1][timeOptions] >= this.intervalTime\r\n\t\t\t\t\t\t\titem.timeLabel = disposeTime(item[timeOptions])\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.list = newVal.concat(this.list)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//发送消息\r\n\t\t\t\t\t\tconsole.log(newVal,'newVal')\r\n\t\t\t\t\t\tconsole.log(this.list,'this.list[this.list.length - 1]')\r\n\t\t\t\t\t\tnewVal.showTime = newVal[timeOptions] - this.list[this.list.length - 1][timeOptions] >= this.intervalTime\r\n\t\t\t\t\t\tnewVal.timeLabel = disposeTime(newVal[timeOptions])\r\n\t\t\t\t\t\tthis.list.push(newVal)\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.scrollBottom()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\timmediate: true,\r\n\t\t\t\tdeep: true\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\t...data\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated(){\r\n\t\t\tthis.list = []\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tbottomHeight(){\r\n\t\t\t\treturn this.footerFlag ? (this.hideBoxHeight + this.showBoxHeight + 'px') : this.showBoxHeight + 'px'\r\n\t\t\t},\r\n\t\t\tsheet(){\r\n\t\t\t\tlet sheet = this.sheetList\r\n\t\t\t\tconst flag = sheet && sheet.length > 0\r\n\t\t\t\treturn flag ? (this.retainSheet ? this.defaultSheet.concat(sheet) : sheet) : this.defaultSheet\r\n\t\t\t},\r\n\t\t\tborderColor(){\r\n\t\t\t\treturn this.readyCloseAudio ? '#fff' : '#000;'\r\n\t\t\t},\r\n\t\t\t//解决watch新老数据一样问题\r\n\t\t\tnewMessageList(){\r\n\t\t\t\treturn deepClone(this.messageList)\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 下拉刷新被触发\r\n\t\t\tonRefresh(){\r\n\t\t\t\tif (this.freshing) return;\r\n\t\t\t\tconst stop = () => {\r\n\t\t\t\t\tthis.triggered = false\r\n\t\t\t\t\tthis.freshing = false\r\n\t\t\t\t}\r\n\t\t\t\tthis.freshing = true;\r\n\t\t\t\tthis.$emit('onRefresh', stop.bind(this))\r\n\t\t\t},\r\n\t\t\t// 下拉刷新被复位\r\n\t\t\tonReset(){\r\n\t\t\t\tthis.triggered = 'restore'; // 需要重置\r\n\t\t\t\t// this.$emit('onReset')\r\n\t\t\t},\r\n\t\t\ttapAvator(item){\r\n\t\t\t\tthis.$emit('tapAvator', item)\r\n\t\t\t},\r\n\t\t\tscrollBottom(){\r\n\t\t\t\tif(this.list.length == 0) return\r\n\t\t\t\tlet duration = 100\r\n\t\t\t\t//'y-chat-' + this.list[this.list.length - 2][this.defaultOptions.msgId]\r\n\t\t\t\t\tthis.scrollToId = 'y'\r\n\t\t\t\t\t// duration = 0\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.scrollToId = 'y-chat-' + this.list[this.list.length - 1][this.defaultOptions.msgId]\r\n\t\t\t\t},duration)\r\n\t\t\t},\r\n\t\t\tshowHideBox(){\r\n\t\t\t\tthis.footerFlag = !this.footerFlag\r\n\t\t\t\tif(this.footerFlag && this.useScrollBottom){\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.scrollBottom()\r\n\t\t\t\t\t},500)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcloseFooter(){\r\n\t\t\t\tthis.footerFlag = false\r\n\t\t\t},\r\n\t\t\tlookImg(img, index){\r\n\t\t\t\tconst urls = this.list.map(item => item.img).filter(item => item)\r\n\t\t\t\tconst current = urls.findIndex(item => item == img)\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tcurrent,\r\n\t\t\t\t\turls,\r\n\t\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\t\tindicator: 'number',\r\n\t\t\t\t\tloop: true,\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\tlongPressActions: {\r\n\t\t\t\t\t\titemList: ['发送给朋友','保存图片'],\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tconsole.log(res,'res')\r\n\t\t\t\t\t\t\tconsole.log(this,'this')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tmoreFun(item){\r\n\t\t\t\titem.default ? this[item.default]() : this.$emit(item.funLabel,item)\r\n\t\t\t},\r\n\t\t\tplayCamera(){\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tsourceType: ['camera'],\r\n\t\t\t\t\tsuccess(res){\r\n\t\t\t\t\t\t// console.log(res)\r\n\t\t\t\t\t\tthis.$emit('playCamera', res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\tconsole.error(err,'err')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tplayPhoto(){\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tsourceType: ['album'],\r\n\t\t\t\t\tsuccess:(res) => {\r\n\t\t\t\t\t\t// console.log(res,'imgRes')\r\n\t\t\t\t\t\tthis.$emit('playPhoto', res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail:(err) => {\r\n\t\t\t\t\t\tconsole.error(err,'imgErr')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsend(){\r\n\t\t\t\tthis.$emit('send', this.sendVal)\r\n\t\t\t\tthis.sendVal = ''\r\n\t\t\t\tthis.focus = true\r\n\t\t\t},\r\n\t\t\tblur(){\r\n\t\t\t\tthis.focus = false\r\n\t\t\t},\r\n\t\t\tshowText(){\r\n\t\t\t\tthis.textShowFlag = true\r\n\t\t\t},\r\n\t\t\tstartAudio(e){\r\n\t\t\t\tif(!this.textShowFlag){\r\n\t\t\t\t\tthis.audioFlag = true\r\n\t\t\t\t\tthis.y = e.changedTouches[0].pageY\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmoveAudio(e){\r\n\t\t\t\tconst y = e.changedTouches[0].pageY\r\n\t\t\t\tif(this.y - y > 70){\r\n\t\t\t\t\tthis.readyCloseAudio = true\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.readyCloseAudio = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tendAudio(){\r\n\t\t\t\tconsole.log('end')\r\n\t\t\t\tthis.audioFlag = false\r\n\t\t\t\tthis.readyCloseAudio = false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n// import ''\r\n@mixin msgBox ($diretion, $position, $symbol) {\r\n\tcontent: '';\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\t#{$diretion}: auto;\r\n\t#{$position}: 0;\r\n\ttop: 10rpx;\r\n\twidth: 0;\r\n\theight: 0;\r\n\t// transform: translate(100%);\r\n\ttransform: translateX(#{$symbol}90%);\r\n\tborder: 15rpx solid transparent;\r\n\tborder-#{$diretion}-color: #fff\r\n}\r\n\r\n@mixin audioAnimate ($color){\r\n\tposition: absolute;\r\n\ttop: 50%;\r\n\tleft: 50%;\r\n\ttransform: translate(-50%, -50%);\r\n\tborder: 8rpx solid $color;\r\n\tborder-radius: 50%;\r\n\t// border-top-color: transparent !important;\r\n\tborder-left-color: transparent !important;\r\n\tborder-right-color: transparent !important;\r\n\tborder-bottom-color: transparent !important;\r\n}\r\n\r\n@keyframes fade_show {\r\n\t0% {\r\n\t\topacity: 0;\r\n\t\tdisplay: none;\r\n\t}\r\n\t10% {\r\n\t\topacity: 0.1;\r\n\t\tdisplay: block;\r\n\t}\r\n\t100% {\r\n\t\topacity: 1;\r\n\t\tdisplay: block;\r\n\t}\r\n}\r\n\r\n@keyframes width_animate_mini {\r\n\t0% {\r\n\t\twidth: 116rpx;\r\n\t}\r\n\t50% {\r\n\t\twidth: 98rpx;\r\n\t}\r\n\t100% {\r\n\t\twidth: 80rpx;\r\n\t}\r\n}\r\n\r\n@keyframes width_animate_large {\r\n\t0% {\r\n\t\twidth: 80rpx;\r\n\t}\r\n\t50% {\r\n\t\twidth: 98rpx;\r\n\t}\r\n\t100% {\r\n\t\twidth: 116rpx;\r\n\t}\r\n}\r\n\r\n.y-wrap {\r\n\toverflow: hidden;\r\n\theight: 100%;\r\n\twidth: 100%;\r\n\tposition: absolute;\r\n\ttop: 0px;\r\n\tbottom: 0px;\r\n\t&_message_content {\r\n\t\tbackground-color: #f5f5f5;\r\n\t\theight: calc(100% - var(--bottom-height));\r\n\t\ttransition: height 0.5s;\r\n\t\t&_box{\r\n\t\t\tpadding: 10rpx 30rpx;\r\n\t\t\theight: auto;\r\n\t\t\t& > view:last-child{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\talign-items: flex-start;\r\n\t\t\t}\r\n\t\t\t&_msg {\r\n\t\t\t\tmax-width: 60vw;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\talign-items: flex-start;\r\n\t\t\t\tpadding: 0 20rpx;\r\n\t\t\t\t&__name {\r\n\t\t\t\t\t// padding: 0 10px 5px;\r\n\t\t\t\t\tpadding-bottom: 10rpx;\r\n\t\t\t\t\theight: 56rpx;\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t& > text {\r\n\t\t\t\t\t\tpadding: 0 10px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t&__me {\r\n\t\t\t\t\tflex-direction: row-reverse;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t&__val {\r\n\t\t\t\t\tbackground-color: #fff;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tflex-wrap: wrap;\r\n\t\t\t\t\tword-break: break-all;\r\n\t\t\t\t\tpadding: 15rpx;\r\n\t\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t&__my {\r\n\t\t\t\t\tjustify-content: flex-end;\r\n\t\t\t\t\tbackground-color: #3a9af6;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\t&_my {\r\n\t\t\t\talign-items: flex-end;\r\n\t\t\t}\r\n\t\t\t&__img {\r\n\t\t\t\twidth: 60vw;\r\n\t\t\t}\r\n\t\t\t&__val::before {\r\n\t\t\t\t@include msgBox(right, left, '-')\r\n\t\t\t}\r\n\t\t\t&__my::before {\r\n\t\t\t\t@include msgBox(left, right, '+')\r\n\t\t\t\tborder-left-color: #3a9af6;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&_my {\r\n\t\t\t& > view:last-child {\r\n\t\t\t\tflex-direction: row-reverse;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t&_footer {\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #fff;\r\n\t\tposition: relative;\r\n\t\tz-index: 10078;\r\n\t\t&_show_box {\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\theight: 140rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t&__ipt {\r\n\t\t\t\tflex: 1;\r\n\t\t\t}\r\n\t\t\t.fade_show {\r\n\t\t\t\tanimation: fade_show .3s linear;\r\n\t\t\t}\r\n\r\n\t\t\t.width_to_mini {\r\n\t\t\t\tanimation: width_animate_mini .3s linear;\r\n\t\t\t}\r\n\r\n\t\t\t.width_to_large {\r\n\t\t\t\tanimation: width_animate_large .3s linear;\r\n\t\t\t}\r\n\r\n\t\t\tview:last-child{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\t\t}\r\n\t\t&_hide_box {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-wrap: wrap;\r\n\t\t\t&_item {\r\n\t\t\t\twidth: 25%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tpadding-bottom: 20rpx;\r\n\t\t\t\t&__btn {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t&_audio {\r\n\t\t// background-color: #fff;\r\n\t\tposition: relative;\r\n\t\twidth: 210rpx;\r\n\t\theight: 210rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\tpadding: 0 20rpx;\r\n\t\ttransform: translateY(25%);\r\n\t\t&__large {\r\n\t\t\ttransition: border-color 0.6s;\r\n\t\t\twidth: 200rpx;\r\n\t\t\theight: 200rpx;\r\n\t\t\t@include audioAnimate(#000);\r\n\t\t}\r\n\t\t&__small {\r\n\t\t\ttransition: border-color 0.4s;\r\n\t\t\twidth: 125rpx;\r\n\t\t\theight: 125rpx;\r\n\t\t\t@include audioAnimate(#000);\r\n\t\t}\r\n\t\t&__mini {\r\n\t\t\ttransition: border-color 0.2s;\r\n\t\t\twidth: 50rpx;\r\n\t\t\theight: 50rpx;\r\n\t\t\t@include audioAnimate(#000);\r\n\t\t}\r\n\t}\r\n\t\r\n\t// $_audio_popup {\r\n\t\t\r\n\t// }\r\n\t\r\n}\r\n\r\n\r\n</style>\r\n","import mod from \"-!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./y-chat.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./y-chat.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1676359304825\n      var cssReload = require(\"D:/360驱动大师目录/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}