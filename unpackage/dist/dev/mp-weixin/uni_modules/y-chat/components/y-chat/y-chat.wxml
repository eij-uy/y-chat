<view class="y-wrap" style="{{('--bottom-height:'+bottomHeight)}}"><scroll-view class="y-wrap_message_content" scroll-y="{{true}}" scroll-into-view="{{scrollToId}}" refresher-enabled="{{useRefresh}}" refresher-threshold="{{100}}" refresher-triggered="{{triggered}}" scroll-with-animation="{{true}}" refresher-default-style="white" refresher-background="#F2F2F2" data-event-opts="{{[['refresherrefresh',[['onRefresh',['$event']]]],['refresherrestore',[['onReset',['$event']]]],['tap',[['closeFooter',['$event']]]]]}}" bindrefresherrefresh="__e" bindrefresherrestore="__e" bindtap="__e"><block wx:for="{{list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['y-wrap_message_content_box',[(item[defaultOptions['userId']]==userId)?'y-wrap_message_content_my':'']]}}" id="{{'y-chat-'+item[defaultOptions['msgId']]}}"><block wx:if="{{item.showTime}}"><view style="text-align:center;padding:10rpx 0 20rpx;">{{''+item.timeLabel+''}}</view></block><view><u-image vue-id="{{'faa6967c-1-'+index}}" width="100rpx" height="100rpx" src="{{item[defaultOptions['avator']]||errorIcon}}" radius="10rpx" bgColor="red" data-event-opts="{{[['^click',[['tapAvator',['$0'],[[['list','',index]]]]]]]}}" bind:click="__e" bind:__l="__l"></u-image><view class="{{['y-wrap_message_content_box_msg',[(item[defaultOptions['userId']]==userId)?'y-wrap_message_content_box_my':'']]}}"><view class="{{['y-wrap_message_content_box_msg__name',[(item[defaultOptions['userId']]==userId)?'y-wrap_message_content_box_msg__me':'']]}}"><block wx:if="{{tagOptions[item[defaultOptions['tagLabel']]]}}"><u-tag vue-id="{{'faa6967c-2-'+index}}" bgColor="{{tagOptions[item[defaultOptions['tagLabel']]]?tagOptions[item[defaultOptions['tagLabel']]].bgColor:''}}" borderColor="{{tagOptions[item[defaultOptions['tagLabel']]]?tagOptions[item[defaultOptions['tagLabel']]].bgColor:''}}" color="{{tagOptions[item[defaultOptions['tagLabel']]]?tagOptions[item[defaultOptions['tagLabel']]].color:''}}" text="{{tagOptions[item[defaultOptions['tagLabel']]]?tagOptions[item[defaultOptions['tagLabel']]].text:''}}" size="mini" bind:__l="__l"></u-tag></block><text>{{item[defaultOptions['name']]}}</text></view><view class="{{['y-wrap_message_content_box_msg__val',[(item[defaultOptions['userId']]==userId)?'y-wrap_message_content_box_msg__my':'']]}}"><block wx:if="{{item[defaultOptions['message']]}}"><view>{{item[defaultOptions['message']]}}</view></block><block wx:if="{{item[defaultOptions['img']]}}"><u-image vue-id="{{'faa6967c-3-'+index}}" src="{{item[defaultOptions['img']]}}" width="calc(60vw - 15rpx)" height="auto" mode="widthFix" data-event-opts="{{[['^tap',[['lookImg',['$0',index],[[['list','',index,''+defaultOptions['img']+'']]]]]]]}}" bind:tap="__e" bind:__l="__l"></u-image></block></view></view></view></view></block></scroll-view><view class="y-wrap_footer"><view class="y-wrap_footer_show_box" id="show_box"><block wx:if="{{textShowFlag}}"><u-icon vue-id="faa6967c-4" custom-style="padding: 0 10rpx" size="{{iconSize}}" name="mic" bind:__l="__l"></u-icon></block><block wx:else><u-icon vue-id="faa6967c-5" custom-style="padding: 0 10rpx" size="{{iconSize}}" name="mic" data-event-opts="{{[['^click',[['showText']]]]}}" bind:click="__e" bind:__l="__l"></u-icon></block><view class="y-wrap_footer_show_box__ipt"><block wx:if="{{textShowFlag}}"><u-input vue-id="faa6967c-6" focus="{{focus}}" value="{{sendVal}}" data-event-opts="{{[['^blur',[['blur']]],['^input',[['__set_model',['','sendVal','$event',[]]]]]]}}" bind:blur="__e" bind:input="__e" bind:__l="__l"></u-input></block><block wx:else><button data-event-opts="{{[['touchstart',[['startAudio',['$event']]]],['touchmove',[['moveAudio',['$event']]]],['touchend',[['endAudio',['$event']]]]]}}" style="font-size:32rpx;overflow:inherit;" bindtouchstart="__e" bindtouchmove="__e" bindtouchend="__e">按住说话</button></block></view><view><u-transition vue-id="faa6967c-7" show="{{!sendVal}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{!sendVal}}"><u-icon vue-id="{{('faa6967c-8')+','+('faa6967c-7')}}" customStyle="padding: 0 10rpx;" size="{{iconSize}}" name="plus" data-event-opts="{{[['^click',[['showHideBox']]]]}}" bind:click="__e" bind:__l="__l"></u-icon></block></u-transition><u-transition vue-id="faa6967c-9" show="{{sendVal}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{sendVal}}"><button style="width:116rpx;padding:0;text-align:center;margin-left:10rpx;" type="primary" size="mini" data-event-opts="{{[['touchend',[['send',['$event']]]]]}}" bindtouchend="__e">发送</button></block></u-transition></view></view><view class="y-wrap_footer_hide_box" id="hide_box"><block wx:for="{{sheet}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['moreFun',['$0'],[[['sheet','',index]]]]]]]}}" class="y-wrap_footer_hide_box_item" bindtap="__e"><view class="y-wrap_footer_hide_box_item__btn"><block wx:if="{{item.img}}"><u-image vue-id="{{'faa6967c-10-'+index}}" src="{{item.img}}" width="60rpx" height="60rpx" mode="aspectFill" bind:__l="__l"></u-image></block><block wx:else><u-icon vue-id="{{'faa6967c-11-'+index}}" size="{{iconSize}}" name="{{item.icon}}" bind:__l="__l"></u-icon></block><text>{{item.name}}</text></view></view></block></view></view><u-popup vue-id="faa6967c-12" show="{{audioFlag}}" bgColor="{{readyCloseAudio?'rgba(255, 0, 0, 0.4)':''}}" mode="center" zoom="{{false}}" round="20" bind:__l="__l" vue-slots="{{['default']}}"><view class="y-wrap_audio"><view class="y-wrap_audio__large" style="{{('border-color:'+borderColor)}}"><view class="y-wrap_audio__small" style="{{('border-color:'+borderColor)}}"><view class="y-wrap_audio__mini" style="{{('border-color:'+borderColor)}}"></view></view></view></view></u-popup><block wx:if="{{audioFlag}}"><view style="{{('position: fixed; bottom: 200rpx; left: 50%; transform: translateX(-50%); z-index: 10080; color: #fff;')}}">上划取消发送</view></block></view>